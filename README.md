# HDF5视频标注工具

一个专业的HDF5视频数据可视化与标注工具，支持高效的时间序列数据标注和智能短语库集成。配套tutorial见[TUTORIAL.md](TUTORIAL.md)。

## 🎬 演示视频

![Demo](demo.gif)

## ✨ 核心功能

### 🎥 数据可视化
- **多窗口图像显示**：支持多个图像流同时显示与视频播放
- **精确播放控制**：播放/暂停、速度调节和帧精确控制

### 📝 标注交互界面
- **精准时间窗口标注**：通过帧精确控制自动生成对应时间窗口
- **动态时间窗口**：支持拖拽调整窗口边界进行校准
- **双击编辑**：时间轴双击直接编辑标注内容

### 💬 自定义语料
- **标注字段管理**：创建、删除和管理不同的标注字段
- **快速标注**：通过自定义任务与语料实现快速标注
- **双语支持**：双语自动转换+自动翻译功能

### 🛡️ 校验+双重保存
- **完整性校验**：保存时校验标注完整性，防止重复或遗漏帧
- **双格式存储**：同时支持HDF5和JSON格式保存

## 🛠️ 环境要求

- **Python**: 3.10+
- **内存**: 建议4GB以上

## 📦 安装依赖

```bash
conda create -n hdf5_viewer python=3.10
conda activate hdf5_viewer
sudo apt update
sudo apt install libxcb-xinerama0 libxcb-cursor0 libxcb-randr0 libxcb-render-util0
pip install -r requirements.txt
```

## 🚀 快速开始

```bash
python main.py
```

### 基本工作流程

1. **📁 打开HDF5文件** - 选择文件并自动加载已有标注
2. **🖼️ 设置图像显示** - 选择图像键在独立窗口显示
3. **📊 配置数据通道** - 添加数据键到时间轴
4. **⏱️ 时间窗口标注** - 滑动当前帧红线到预设标注点位+点击按钮创建时间窗口
5. **✏️ 编辑标注内容** - 双击时间窗口并从短语库选择或自定义输入
6. **💾 保存数据** - 双格式保存标注结果

## 🎯 主要特性

- **智能短语库**：自定义任务类别+预定义术语快速选择
- **无缝衔接**：自动计算时间窗口，确保标注连续性
- **中文支持**：内置中文字体，全面支持中文标注
- **数据完整性**：自动冲突检测和完整性验证

## 📁 项目结构

```
hdf5_viewer/
├── main.py                    # 主程序
├── requirements.txt           # 依赖包
├── phrase_library.yaml      # 短语库配置
├── fonts/                    # 中文字体
└── src/                      # 源代码
    ├── core/                # 核心功能
    ├── ui/                  # 用户界面
    └── utils/               # 工具类
```

## 🔧 定制开发

- **自定义短语**：编辑 `phrase_library.yaml`
- **界面扩展**：修改 `src/ui/` 下相关文件
- **数据处理**：扩展 `src/core/hdf5_model.py`